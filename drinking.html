<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Holiday Inn Times Square — Irish Pubs, Cocktail Bars, Breweries</title>

  <!-- Leaflet -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />

  <style>
    :root{
      --bg:#0b0f17;
      --text:#e7eefc;
      --muted:#a9b7d6;
      --border:rgba(255,255,255,.10);

      --green:#34d399;      /* Irish pubs */
      --green2:rgba(52,211,153,.14);

      --purple:#a78bfa;     /* Cocktail bars */
      --purple2:rgba(167,139,250,.14);

      --brown:#b45309;      /* Breweries */
      --brown2:rgba(180,83,9,.18);

      --hotel:#7dd3fc;      /* Hotel */
      --hotel2:rgba(125,211,252,.14);
    }

    *{ box-sizing:border-box }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background:
        radial-gradient(1200px 700px at 20% -10%, rgba(52,211,153,.12), transparent 55%),
        radial-gradient(1000px 700px at 85% 0%, rgba(167,139,250,.14), transparent 55%),
        radial-gradient(1000px 700px at 70% 90%, rgba(180,83,9,.12), transparent 55%),
        var(--bg);
      color:var(--text);
    }

    header{
      max-width:1200px;
      margin:0 auto;
      padding:18px 18px 10px;
    }
    h1{ margin:0 0 6px; font-size:20px; letter-spacing:.2px; }
    .sub{ margin:0; color:var(--muted); font-size:14px; line-height:1.4; }

    .wrap{
      max-width:1200px;
      margin:0 auto;
      padding:14px 18px 26px;
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap:14px;
    }
    @media (max-width: 980px){ .wrap{ grid-template-columns:1fr } }

    .panel{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid var(--border);
      border-radius:18px;
      overflow:hidden;
      box-shadow: 0 18px 50px rgba(0,0,0,.35);
    }

    #map{ height: 560px; width:100%; }
    @media (max-width: 980px){ #map{ height: 520px; } }

    .list-panel{ display:flex; flex-direction:column; min-height:560px; }
    .list-head{
      padding:14px 14px 10px;
      border-bottom:1px solid var(--border);
      background: rgba(16,24,39,.55);
      backdrop-filter: blur(6px);
    }
    .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .pills{ display:flex; flex-wrap:wrap; gap:8px; margin-top:10px; }
    .pill{
      font-size:12px;
      color:var(--muted);
      border:1px solid var(--border);
      padding:6px 10px;
      border-radius:999px;
      white-space:nowrap;
    }
    .pill b{ color:var(--text); font-weight:800; }

    .btn{
      display:inline-flex;
      align-items:center;
      gap:8px;
      text-decoration:none;
      color:var(--text);
      border:1px solid var(--border);
      padding:8px 10px;
      border-radius:12px;
      font-size:12px;
      background: rgba(255,255,255,.03);
      cursor:pointer;
      user-select:none;
    }
    .btn:hover{ border-color: rgba(255,255,255,.22); }

    .cards{ padding:12px; overflow:auto; }
    .card{
      border:1px solid var(--border);
      border-radius:14px;
      padding:12px;
      margin-bottom:10px;
      background: rgba(18,28,46,.72);
    }
    .card:last-child{ margin-bottom:0; }

    .card.hotel{
      border-color: rgba(125,211,252,.45);
      background: linear-gradient(180deg, var(--hotel2), rgba(18,28,46,.70));
    }
    .card.irish{
      border-color: rgba(52,211,153,.45);
      background: linear-gradient(180deg, var(--green2), rgba(18,28,46,.70));
    }
    .card.cocktail{
      border-color: rgba(167,139,250,.45);
      background: linear-gradient(180deg, var(--purple2), rgba(18,28,46,.70));
    }
    .card.brewery{
      border-color: rgba(180,83,9,.55);
      background: linear-gradient(180deg, var(--brown2), rgba(18,28,46,.70));
    }

    .card h3{
      margin:0 0 6px;
      font-size:14px;
      display:flex;
      align-items:center;
      gap:8px;
      flex-wrap:wrap;
    }

    .badge{
      font-size:11px;
      padding:3px 8px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      color: var(--text);
      background: rgba(255,255,255,.06);
      white-space:nowrap;
    }
    .badge.hotel{ border-color: rgba(125,211,252,.50); color: var(--hotel); background: rgba(125,211,252,.10); }
    .badge.irish{ border-color: rgba(52,211,153,.50); color: var(--green); background: rgba(52,211,153,.10); }
    .badge.cocktail{ border-color: rgba(167,139,250,.50); color: var(--purple); background: rgba(167,139,250,.10); }
    .badge.brewery{ border-color: rgba(180,83,9,.60); color: var(--brown); background: rgba(180,83,9,.12); }

    .meta{
      color:var(--muted);
      font-size:12px;
      line-height:1.4;
      margin:0 0 10px;
    }

    .actions{ display:flex; gap:8px; flex-wrap:wrap; }

    /* Leaflet popup style */
    .leaflet-popup-content-wrapper{
      background:#0f172a;
      color:var(--text);
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
    }
    .leaflet-popup-tip{ background:#0f172a; }
  </style>
</head>

<body>
  <header>
    <h1>Irish Pubs, Cocktail Bars & Breweries — Midtown Map</h1>
    <p class="sub">Hotel is the focal point. Irish = green, Cocktail = purple, Breweries = brown. Pins load instantly (no geocoding).</p>
  </header>

  <main class="wrap">
    <section class="panel">
      <div id="map"></div>
    </section>

    <aside class="panel list-panel">
      <div class="list-head">
        <div class="row">
          <div>
            <div style="font-size:14px; font-weight:800;">Stops</div>
            <div style="font-size:12px; color:var(--muted); margin-top:2px;">Sorted by distance from the hotel</div>
          </div>
          <div style="display:flex; gap:8px; flex-wrap:wrap;">
            <a class="btn" id="fitAll" href="#">Fit map</a>
            <a class="btn" id="openAll" href="#">Open all links</a>
          </div>
        </div>

        <div class="pills">
          <span class="pill" id="countPill"><b>0</b> locations</span>
          <span class="pill"><span style="color:var(--green);font-weight:900;">●</span> Irish Pubs</span>
          <span class="pill"><span style="color:var(--purple);font-weight:900;">●</span> Cocktail Bars</span>
          <span class="pill"><span style="color:var(--brown);font-weight:900;">●</span> Breweries</span>
        </div>
      </div>

      <div class="cards" id="cards"></div>
    </aside>
  </main>

  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <script>
    // =========================
    // DATA (ALL LOCATIONS)
    // =========================
    const CAT = {
      IRISH:    { key:"irish",   label:"Irish Pub",    marker:"var(--green)",  cardClass:"irish",   badgeClass:"irish"   },
      COCKTAIL: { key:"cocktail",label:"Cocktail Bar", marker:"var(--purple)", cardClass:"cocktail",badgeClass:"cocktail"},
      BREWERY:  { key:"brewery", label:"Brewery",      marker:"var(--brown)",  cardClass:"brewery", badgeClass:"brewery" }
    };

    const hotel = {
      id:"hotel",
      name:"Holiday Inn Times Square",
      link:"https://maps.app.goo.gl/j8mMS16NoXiFn7sP8",
      lat:40.7552207,
      lng:-73.9916596
    };

    // Approximate coordinates so pins always load.
    // Replace lat/lng with exact values anytime.
    const places = [
      // [IRISH PUBS]
      { name:"Connolly’s Pub & Restaurant (45th St)", desc:"Family-owned, classic Irish atmosphere with traditional dishes in Midtown West.", link:"https://share.google/Ac28nfQ7d1cZGF4sy", cat:CAT.IRISH, lat:40.75670, lng:-73.98475 },
      { name:"Connolly’s Pub & Restaurant (47th St)", desc:"Family-owned, classic Irish atmosphere with traditional dishes in Midtown.", link:"https://share.google/irAx4Jiqxqk934JKK", cat:CAT.IRISH, lat:40.75845, lng:-73.97865 },
      { name:"The Perfect Pint", desc:"Popular multi-level pub near Times Square with strong reviews for atmosphere and food.", link:"https://share.google/VD21DIyFhVp00MXon", cat:CAT.IRISH, lat:40.75655, lng:-73.98495 },
      { name:"The Irish Exit", desc:"Highly regarded spot from the team behind The Dead Rabbit.", link:"https://share.google/EWZP2ZxJ3cWF0M7N8", cat:CAT.IRISH, lat:40.71820, lng:-73.98780 },
      { name:"Stout NYC (Flagship)", desc:"Large, bustling environment, extensive beer selection, and classic pub fare.", link:"https://share.google/CsVdREJ4CwfvkM40p", cat:CAT.IRISH, lat:40.74960, lng:-73.98860 },
      { name:"The Mean Fiddler", desc:"A lively, authentic option on 47th Street.", link:"https://share.google/ICsUVroTRAWWVduRO", cat:CAT.IRISH, lat:40.75995, lng:-73.98675 },
      { name:"McDaid’s Irish Pub", desc:"Friendly spot with good pub food, located in the Midtown area.", link:"https://share.google/ZTkIuPDnDllhrGTQe", cat:CAT.IRISH, lat:40.74895, lng:-73.98405 },

      // [COCKTAIL BARS]
      { name:"Patent Pending", desc:"Low-lit bar behind a hidden door in Patent Coffee, serving cocktails with an electric theme.", link:"https://share.google/g8OZdt5AAmYuRRiNy", cat:CAT.COCKTAIL, lat:40.74510, lng:-73.99010 },
      { name:"Apotheke NoMad", desc:"Stylish cocktail bar featuring a speakeasy vibe and a rooftop terrace.", link:"https://share.google/zjX6Jdw3vECfCsrKk", cat:CAT.COCKTAIL, lat:40.74405, lng:-73.99195 },
      { name:"George Bang Bang", desc:"Bar, speakeasy, cocktails.", link:"https://share.google/3ZGPhyZjfMFPB41cZ", cat:CAT.COCKTAIL, lat:40.73025, lng:-74.00055 },
      { name:"Chez Zou", desc:"Cozy cocktail bar known for craft drinks, plus a variety of eats.", link:"https://share.google/4DcIRXkbxPOlSR7J7", cat:CAT.COCKTAIL, lat:40.75310, lng:-73.99565 },
      { name:"Dear Irving on Hudson Rooftop", desc:"Cocktail parlor at Aliz Hotel serving fancy drinks & bites with Midtown views.", link:"https://share.google/LEUgR2bp3fLfX4g6v", cat:CAT.COCKTAIL, lat:40.75630, lng:-73.99375 },
      { name:"The Woo Woo NYC", desc:"Hidden 1980s-themed speakeasy cocktail bar serving creatively presented drinks.", link:"https://share.google/FvzYZevpwC2JRrkbW", cat:CAT.COCKTAIL, lat:40.72865, lng:-73.98305 },
      { name:"Thyme Bar", desc:"Pre-war cellar cocktail lounge with light fare & creative libations in an intimate space.", link:"https://share.google/YugpFRJzmZPsIF1C4", cat:CAT.COCKTAIL, lat:40.74170, lng:-73.99235 },

      // [BREWERIES]
      { name:"Other Half Brewing - Rockefeller Center Taproom", desc:"Other Half taproom at Rockefeller Center.", link:"https://share.google/Kkm9dGemBiI00O1Sn", cat:CAT.BREWERY, lat:40.75870, lng:-73.97870 },
      { name:"Craft+Carry Hell’s Kitchen", desc:"Laid-back spot with 20+ beer taps and hundreds of cans and bottles, plus free skeeball.", link:"https://share.google/VCaNe68mY7zPDeUFG", cat:CAT.BREWERY, lat:40.76335, lng:-73.99260 },
      { name:"City Beer in Murray Hill", desc:"Beer, cider & mead paired with creative bar plates in a chic, relaxed setting with a retail area.", link:"https://share.google/yhMfPTYmuz9NV3SwL", cat:CAT.BREWERY, lat:40.74680, lng:-73.97670 },
      { name:"Three Monkeys", desc:"Sports bar with more than 30 draft brews, lots of TVs & a second-floor outdoor deck.", link:"https://share.google/vp5x3cLDNhbf5rbGx", cat:CAT.BREWERY, lat:40.76095, lng:-73.98295 },
      { name:"Beer Culture", desc:"Snug, brick-walled bottle shop & bar with panini, bratwursts & other eats.", link:"https://share.google/GHmawH9xlb6r9kSxr", cat:CAT.BREWERY, lat:40.75925, lng:-73.99285 },
      { name:"Haymaker Bar & Kitchen", desc:"Cool, laid-back spot with elevated pub fare & a rotating array of craft draft beers.", link:"https://share.google/ERooP9meeCt8vpqzo", cat:CAT.BREWERY, lat:40.74730, lng:-73.99110 }
    ];

    // =========================
    // HELPERS
    // =========================
    function escapeHtml(str){
      return String(str).replace(/[&<>"']/g, m => ({
        "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
      }[m]));
    }

    function haversineMiles(a, b) {
      const toRad = d => d * Math.PI / 180;
      const R = 3958.7613; // miles
      const dLat = toRad(b.lat - a.lat);
      const dLng = toRad(b.lng - a.lng);
      const lat1 = toRad(a.lat);
      const lat2 = toRad(b.lat);
      const s =
        Math.sin(dLat/2)**2 +
        Math.cos(lat1)*Math.cos(lat2) * Math.sin(dLng/2)**2;
      return 2 * R * Math.asin(Math.sqrt(s));
    }

    function makeDotIcon(colorCss){
      return L.divIcon({
        className:"",
        html: `
          <div style="
            width:14px;height:14px;border-radius:999px;
            background:${colorCss};
            border:2px solid rgba(15,23,42,.95);
            box-shadow:0 10px 20px rgba(0,0,0,.35);
          "></div>
        `,
        iconSize:[14,14],
        iconAnchor:[7,7]
      });
    }

    const hotelIcon = L.divIcon({
      className:"",
      html: `
        <div style="
          width:18px;height:18px;border-radius:999px;
          background:var(--hotel);
          border:2px solid rgba(15,23,42,.95);
          box-shadow:0 10px 20px rgba(0,0,0,.35);
        "></div>
      `,
      iconSize:[18,18],
      iconAnchor:[9,9]
    });

    // =========================
    // MAP
    // =========================
    const map = L.map("map", { zoomControl:true, scrollWheelZoom:true })
      .setView([hotel.lat, hotel.lng], 15);

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      maxZoom:19,
      attribution:'&copy; OpenStreetMap contributors'
    }).addTo(map);

    const markersLayer = L.layerGroup().addTo(map);
    const linesLayer = L.layerGroup().addTo(map);
    const bounds = L.latLngBounds();

    // Hotel marker
    const hotelMarker = L.marker([hotel.lat, hotel.lng], { icon: hotelIcon })
      .addTo(markersLayer)
      .bindPopup(`
        <div style="min-width:250px">
          <div style="font-weight:800; margin-bottom:4px;">${escapeHtml(hotel.name)}</div>
          <div style="color:#94a3b8; font-size:12px; margin-bottom:10px;">Focal point</div>
          <a href="${hotel.link}" target="_blank" rel="noopener">Open in Google Maps</a>
        </div>
      `);

    bounds.extend([hotel.lat, hotel.lng]);

    // Sort places by distance from hotel
    const enriched = places.map((p, idx) => ({
      ...p,
      id: `p${idx}`,
      miles: haversineMiles(hotel, p)
    })).sort((a,b) => a.miles - b.miles);

    // Markers + lines
    const markerById = new Map();

    enriched.forEach((p) => {
      const icon = makeDotIcon(p.cat.marker);
      const marker = L.marker([p.lat, p.lng], { icon }).addTo(markersLayer);

      marker.bindPopup(`
        <div style="min-width:260px">
          <div style="font-weight:800; margin-bottom:4px;">${escapeHtml(p.name)}</div>
          <div style="color:#94a3b8; font-size:12px; margin-bottom:8px;">
            ${escapeHtml(p.cat.label)} • ~${p.miles.toFixed(2)} mi from hotel
          </div>
          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <a href="${p.link}" target="_blank" rel="noopener">Open your link</a>
            <a href="https://www.google.com/maps/dir/?api=1&origin=${hotel.lat},${hotel.lng}&destination=${p.lat},${p.lng}&travelmode=walking"
               target="_blank" rel="noopener">Walking directions</a>
          </div>
        </div>
      `);

      // line to hotel
      L.polyline([[hotel.lat, hotel.lng],[p.lat, p.lng]], { weight:2, opacity:.22 }).addTo(linesLayer);

      bounds.extend([p.lat, p.lng]);
      markerById.set(p.id, marker);
    });

    map.fitBounds(bounds.pad(0.12));

    // =========================
    // CARDS
    // =========================
    const cardsEl = document.getElementById("cards");
    const countPill = document.getElementById("countPill");
    countPill.innerHTML = `<b>${enriched.length + 1}</b> locations`;

    // Hotel card
    const hotelCard = document.createElement("div");
    hotelCard.className = "card hotel";
    hotelCard.innerHTML = `
      <h3>${escapeHtml(hotel.name)} <span class="badge hotel">Hotel (Focal)</span></h3>
      <p class="meta">All distances are measured from here.</p>
      <div class="actions">
        <a class="btn" href="${hotel.link}" target="_blank" rel="noopener">Open hotel link</a>
        <a class="btn" href="#" data-pan-hotel="1">Show on map</a>
      </div>
    `;
    cardsEl.appendChild(hotelCard);

    // Place cards
    enriched.forEach((p) => {
      const card = document.createElement("div");
      card.className = `card ${p.cat.cardClass}`;
      card.innerHTML = `
        <h3>
          ${escapeHtml(p.name)}
          <span class="badge ${p.cat.badgeClass}">${escapeHtml(p.cat.label)}</span>
          <span class="badge">~${p.miles.toFixed(2)} mi</span>
        </h3>
        <p class="meta">${escapeHtml(p.desc || "")}</p>
        <div class="actions">
          <a class="btn" href="${p.link}" target="_blank" rel="noopener">Open your link</a>
          <a class="btn" href="https://www.google.com/maps/dir/?api=1&origin=${hotel.lat},${hotel.lng}&destination=${p.lat},${p.lng}&travelmode=walking"
             target="_blank" rel="noopener">Walking directions</a>
          <a class="btn" href="#" data-pan="${p.id}">Show on map</a>
        </div>
      `;
      cardsEl.appendChild(card);
    });

    // Buttons
    document.getElementById("fitAll").addEventListener("click", (e) => {
      e.preventDefault();
      map.fitBounds(bounds.pad(0.12));
    });

    document.getElementById("openAll").addEventListener("click", (e) => {
      e.preventDefault();
      window.open(hotel.link, "_blank", "noopener");
      enriched.forEach(p => window.open(p.link, "_blank", "noopener"));
    });

    // Card → map interaction
    cardsEl.addEventListener("click", (e) => {
      const hotelBtn = e.target.closest("[data-pan-hotel]");
      if (hotelBtn){
        e.preventDefault();
        map.setView([hotel.lat, hotel.lng], Math.max(map.getZoom(), 16), { animate:true });
        hotelMarker.openPopup();
        return;
      }

      const panBtn = e.target.closest("[data-pan]");
      if (!panBtn) return;

      e.preventDefault();
      const id = panBtn.getAttribute("data-pan");
      const p = enriched.find(x => x.id === id);
      const m = markerById.get(id);
      if (!p || !m) return;

      map.setView([p.lat, p.lng], Math.max(map.getZoom(), 16), { animate:true });
      m.openPopup();
    });
  </script>
</body>
</html>
